services:
  api:
    build:
      context: .
      dockerfile: apps/api/Dockerfile
    environment:
      API_PORT: 3001
      DATABASE_URL: ${DATABASE_URL}
      REDIS_URL: ${REDIS_URL}
      JWT_SECRET: ${JWT_SECRET}
      ADMIN_EMAIL: ${ADMIN_EMAIL}
      ADMIN_PASSWORD: ${ADMIN_PASSWORD}
    expose:
      - "3001"

  worker:
    build:
      context: .
      dockerfile: apps/worker/Dockerfile
    environment:
      WORKER_HEALTH_PORT: 3030
      DATABASE_URL: ${DATABASE_URL}
      REDIS_URL: ${REDIS_URL}
      WA_AUTH_ENC_KEY_B64: ${WA_AUTH_ENC_KEY_B64}
    expose:
      - "3030"

  web:
    build:
      context: .
      dockerfile: apps/web/Dockerfile
      args:
        VITE_API_URL: ${VITE_API_URL}
    environment:
      WEB_PORT: 3000
    expose:
      - "3000"

